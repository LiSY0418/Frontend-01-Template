# 第六周总结

## 1.有限状态机处理字符串

### 有限状态机

• 每一个状态都是一个机器

• 在每一个机器里，我们可以做计算、存储、输出......

• 所有的这些机器接受的输入是一致的

• 状态机的每一个机器本身没有状态，如果我们用函数来表示的话，它应该是纯函数（无副作用） 

• 每一个机器知道下一个状态

• 每个机器都有确定的下一个状态（Moore） 

• 每个机器根据输入决定下一个状态（Mealy）



## 2.ToyBrowser的HTML解析

#### 浏览器工作原理{HTTP—Parse—CssComputing—Layout—Render（渲染）—BitMap(图)}

#### HTML解析包括以下几部：

##### 1. 拆分文件—2. 创建状态机—3. 解析标签—4. 创建元素—5. 处理属性—6.构建DOM树—7.文本节点

## 3.CssComputing

##### 1. CSS规则收集—2. 添加调用—3.获取父元素序列（获得和计算父元素匹配的顺序是从内向外）—4.拆分选择器（用循环匹配父元素队列）—5. 计算选择器与元素匹配（根据选择器的类型和元素属性，计算是否与当前元素匹配）—6. 生成computed属性（一旦选择匹配，就应用选择器到元素上，形成computedStyle）—7.确定规则覆盖关系（specificity是个四元组，越左边权重越高）。